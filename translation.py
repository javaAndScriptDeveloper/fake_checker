from deep_translator import GoogleTranslator


class Translator:

    def __init__(self):
        self.supported_translations_list = [
            {
                "label": "Українська",
                "value": "ukrainian"
            },
            {
                "label": "English",
                "value": "english"
            }
        ]

        self.ui_translations = {
            "english": {
                "window_title": "Propaganda Checker App",
                "tab_process": "Text Processor",
                "tab_table": "Result Table",
                "tab_ratings": "Ratings",
                "tab_system_info": "System Info",
                "tab_graph": "Graph",
                "select_source": "Select Source:",
                "select_language": "Select Language:",
                "title_placeholder": "Enter title here...",
                "text_placeholder": "Enter your text here...",
                "process_button": "Process",
                "export_csv": "Export to CSV",
                "fehner_score": "Fehner Score:",
                "calculating": "Calculating...",
                "name": "Name",
                "rating": "Rating",
                "source": "Source",
                "text_data": "Text Data",
                "sentimental_score": "Sentimental Score",
                "triggered_keywords": "Triggered Keywords",
                "triggered_topics": "Triggered Topics",
                "text_simplicity": "Text Simplicity",
                "confidence_factor": "Confidence Factor",
                "clickbait": "Clickbait",
                "subjective": "Subjective",
                "call_to_action": "Call to Action",
                "repeated_take": "Repeated Take",
                "repeated_note": "Repeated Note",
                "total_score": "Total Score",
                "is_propaganda": "Is Propaganda",
                "text_simplicity_deviation": "Text Simplicity Deviation",
                "graph_unavailable": "Neo4j not connected",
                "refresh_graph": "Refresh",
                "sources_label": "Sources",
                "notes_label": "Notes",
                "relationships_label": "Relationships",
                "most_influential": "Most Influential Sources",
                "avg_propaganda_score": "Avg Propaganda Score",
                "note_count": "Note Count",
                "platform": "Platform",
                "connections": "Connections",
                "tab_statistics": "Statistics",
                "refresh_statistics": "Refresh Statistics",
                "select_chart": "Select Chart:",
                "all_sources": "All Sources",
                "select_note": "Select Note:",
                "radar_chart": "Radar Chart",
                "histogram_chart": "Score Distribution",
                "temporal_chart": "Temporal Trends",
                "correlation_chart": "Correlation Heatmap",
                "breakdown_chart": "Note Breakdown",
                "platform_chart": "Platform Comparison",
                "show_communities": "Communities",
                "show_pagerank": "PageRank",
                "show_fehner_a": "Fehner A",
                "show_cascades": "Cascades",
                "no_data_available": "No data available",
                "notes_analyzed": "Notes analyzed",
                "sources_detected": "Sources detected",
                "communities_found": "Communities found",
                "dim_sentiment": "Sentiment",
                "dim_keywords": "Keywords",
                "dim_topics": "Topics",
                "dim_simplicity": "Simplicity",
                "dim_confidence": "Confidence",
                "dim_clickbait": "Clickbait",
                "dim_subjective": "Subjective",
                "dim_cta": "Call to Action",
                "dim_repeated_take": "Repeated Take",
                "dim_repeated_note": "Repeated Note",
                "dim_messianism": "Messianism",
                "dim_generalization": "Generalization",
                "dim_opposition": "Opposition",
            },
            "ukrainian": {
                "window_title": "Перевірка на Пропаганду",
                "tab_process": "Обробка Тексту",
                "tab_table": "Таблиця Результатів",
                "tab_ratings": "Рейтинги",
                "tab_system_info": "Системна Інформація",
                "tab_graph": "Граф",
                "select_source": "Оберіть Джерело:",
                "select_language": "Оберіть Мову:",
                "title_placeholder": "Введіть заголовок тут...",
                "text_placeholder": "Введіть текст тут...",
                "process_button": "Обробити",
                "export_csv": "Експорт у CSV",
                "fehner_score": "Оцінка Фехнера:",
                "calculating": "Обчислення...",
                "name": "Назва",
                "rating": "Рейтинг",
                "source": "Джерело",
                "text_data": "Текстові Дані",
                "sentimental_score": "Сентиментальна Оцінка",
                "triggered_keywords": "Тригерні Слова",
                "triggered_topics": "Тригерні Теми",
                "text_simplicity": "Простота Тексту",
                "confidence_factor": "Фактор Впевненості",
                "clickbait": "Клікбейт",
                "subjective": "Суб'єктивність",
                "call_to_action": "Заклик до Дії",
                "repeated_take": "Повторювана Позиція",
                "repeated_note": "Повторювана Нотатка",
                "total_score": "Загальна Оцінка",
                "is_propaganda": "Чи є Пропагандою",
                "text_simplicity_deviation": "Відхилення Простоти Тексту",
                "graph_unavailable": "Neo4j не підключено",
                "refresh_graph": "Оновити",
                "sources_label": "Джерела",
                "notes_label": "Нотатки",
                "relationships_label": "Зв'язки",
                "most_influential": "Найвпливовіші Джерела",
                "avg_propaganda_score": "Середня Оцінка Пропаганди",
                "note_count": "Кількість Нотаток",
                "platform": "Платформа",
                "connections": "З'єднання",
                "tab_statistics": "Статистика",
                "refresh_statistics": "Оновити Статистику",
                "select_chart": "Оберіть Графік:",
                "all_sources": "Всі Джерела",
                "select_note": "Оберіть Нотатку:",
                "radar_chart": "Радарний Графік",
                "histogram_chart": "Розподіл Оцінок",
                "temporal_chart": "Часові Тенденції",
                "correlation_chart": "Карта Кореляцій",
                "breakdown_chart": "Аналіз Нотатки",
                "platform_chart": "Порівняння Платформ",
                "show_communities": "Спільноти",
                "show_pagerank": "PageRank",
                "show_fehner_a": "Фехнер A",
                "show_cascades": "Каскади",
                "no_data_available": "Дані відсутні",
                "notes_analyzed": "Нотаток проаналізовано",
                "sources_detected": "Джерел виявлено",
                "communities_found": "Спільнот знайдено",
                "dim_sentiment": "Сентимент",
                "dim_keywords": "Ключові Слова",
                "dim_topics": "Теми",
                "dim_simplicity": "Простота",
                "dim_confidence": "Впевненість",
                "dim_clickbait": "Клікбейт",
                "dim_subjective": "Суб'єктивність",
                "dim_cta": "Заклик до Дії",
                "dim_repeated_take": "Повторювана Позиція",
                "dim_repeated_note": "Повторювана Нотатка",
                "dim_messianism": "Месіанізм",
                "dim_generalization": "Узагальнення",
                "dim_opposition": "Протиставлення",
            }
        }

    def get_ui_text(self, key: str, language: str = "ukrainian") -> str:
        return self.ui_translations.get(language, self.ui_translations["ukrainian"]).get(key, key)

    def translate_to_english(self, text, source_language):
        try:
            translation = GoogleTranslator(source=source_language, target='english').translate(text)
            return translation
        except Exception as e:
            return f"Translation Error: {e}"
