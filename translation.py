from deep_translator import GoogleTranslator


class Translator:

    def __init__(self):
        self.supported_translations_list = [
            {
                "label": "Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",
                "value": "ukrainian"
            },
            {
                "label": "English",
                "value": "english"
            }
        ]

        self.ui_translations = {
            "english": {
                "window_title": "Propaganda Checker App",
                "tab_process": "Text Processor",
                "tab_table": "Result Table",
                "tab_ratings": "Ratings",
                "tab_system_info": "System Info",
                "tab_graph": "Graph",
                "select_source": "Select Source:",
                "select_language": "Select Language:",
                "title_placeholder": "Enter title here...",
                "text_placeholder": "Enter your text here...",
                "process_button": "Process",
                "export_csv": "Export to CSV",
                "fehner_score": "Fehner Score:",
                "calculating": "Calculating...",
                "name": "Name",
                "rating": "Rating",
                "source": "Source",
                "text_data": "Text Data",
                "sentimental_score": "Sentimental Score",
                "triggered_keywords": "Triggered Keywords",
                "triggered_topics": "Triggered Topics",
                "text_simplicity": "Text Simplicity",
                "confidence_factor": "Confidence Factor",
                "clickbait": "Clickbait",
                "subjective": "Subjective",
                "call_to_action": "Call to Action",
                "repeated_take": "Repeated Take",
                "repeated_note": "Repeated Note",
                "total_score": "Total Score",
                "is_propaganda": "Is Propaganda",
                "text_simplicity_deviation": "Text Simplicity Deviation",
                "graph_unavailable": "Neo4j not connected",
                "refresh_graph": "Refresh",
                "sources_label": "Sources",
                "notes_label": "Notes",
                "relationships_label": "Relationships",
                "most_influential": "Most Influential Sources",
                "avg_propaganda_score": "Avg Propaganda Score",
                "note_count": "Note Count",
                "platform": "Platform",
                "connections": "Connections",
                "tab_statistics": "Statistics",
                "refresh_statistics": "Refresh Statistics",
                "select_chart": "Select Chart:",
                "all_sources": "All Sources",
                "select_note": "Select Note:",
                "radar_chart": "Radar Chart",
                "histogram_chart": "Score Distribution",
                "temporal_chart": "Temporal Trends",
                "correlation_chart": "Correlation Heatmap",
                "breakdown_chart": "Note Breakdown",
                "platform_chart": "Platform Comparison",
                "show_communities": "Communities",
                "show_pagerank": "PageRank",
                "show_fehner_a": "Fehner A",
                "show_cascades": "Cascades",
                "no_data_available": "No data available",
                "notes_analyzed": "Notes analyzed",
                "sources_detected": "Sources detected",
                "communities_found": "Communities found",
                "dim_sentiment": "Sentiment",
                "dim_keywords": "Keywords",
                "dim_topics": "Topics",
                "dim_simplicity": "Simplicity",
                "dim_confidence": "Confidence",
                "dim_clickbait": "Clickbait",
                "dim_subjective": "Subjective",
                "dim_cta": "Call to Action",
                "dim_repeated_take": "Repeated Take",
                "dim_repeated_note": "Repeated Note",
                "dim_messianism": "Messianism",
                "dim_generalization": "Generalization",
                "dim_opposition": "Opposition",
                # Audio-related translations
                "audio_input": "Audio Input",
                "upload_audio_file": "ðŸ“ Upload Audio File",
                "select_audio_file": "Select Audio File",
                "invalid_audio": "Invalid Audio File",
                "transcribing_audio": "Transcribing audio...",
                "transcription_complete": "Transcription complete ({duration}, detected: {language})",
                "transcription_failed": "Transcription Failed",
                "transcription_error": "Error during transcription",
                "audio_not_available": "Audio Not Available",
            },
            "ukrainian": {
                "window_title": "ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Ð½Ð° ÐŸÑ€Ð¾Ð¿Ð°Ð³Ð°Ð½Ð´Ñƒ",
                "tab_process": "ÐžÐ±Ñ€Ð¾Ð±ÐºÐ° Ð¢ÐµÐºÑÑ‚Ñƒ",
                "tab_table": "Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ–Ð²",
                "tab_ratings": "Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¸",
                "tab_system_info": "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð° Ð†Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ",
                "tab_graph": "Ð“Ñ€Ð°Ñ„",
                "select_source": "ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ Ð”Ð¶ÐµÑ€ÐµÐ»Ð¾:",
                "select_language": "ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ ÐœÐ¾Ð²Ñƒ:",
                "title_placeholder": "Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ñ‚ÑƒÑ‚...",
                "text_placeholder": "Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚ Ñ‚ÑƒÑ‚...",
                "process_button": "ÐžÐ±Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸",
                "export_csv": "Ð•ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñƒ CSV",
                "fehner_score": "ÐžÑ†Ñ–Ð½ÐºÐ° Ð¤ÐµÑ…Ð½ÐµÑ€Ð°:",
                "calculating": "ÐžÐ±Ñ‡Ð¸ÑÐ»ÐµÐ½Ð½Ñ...",
                "name": "ÐÐ°Ð·Ð²Ð°",
                "rating": "Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³",
                "source": "Ð”Ð¶ÐµÑ€ÐµÐ»Ð¾",
                "text_data": "Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ– Ð”Ð°Ð½Ñ–",
                "sentimental_score": "Ð¡ÐµÐ½Ñ‚Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð° ÐžÑ†Ñ–Ð½ÐºÐ°",
                "triggered_keywords": "Ð¢Ñ€Ð¸Ð³ÐµÑ€Ð½Ñ– Ð¡Ð»Ð¾Ð²Ð°",
                "triggered_topics": "Ð¢Ñ€Ð¸Ð³ÐµÑ€Ð½Ñ– Ð¢ÐµÐ¼Ð¸",
                "text_simplicity": "ÐŸÑ€Ð¾ÑÑ‚Ð¾Ñ‚Ð° Ð¢ÐµÐºÑÑ‚Ñƒ",
                "confidence_factor": "Ð¤Ð°ÐºÑ‚Ð¾Ñ€ Ð’Ð¿ÐµÐ²Ð½ÐµÐ½Ð¾ÑÑ‚Ñ–",
                "clickbait": "ÐšÐ»Ñ–ÐºÐ±ÐµÐ¹Ñ‚",
                "subjective": "Ð¡ÑƒÐ±'Ñ”ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ",
                "call_to_action": "Ð—Ð°ÐºÐ»Ð¸Ðº Ð´Ð¾ Ð”Ñ–Ñ—",
                "repeated_take": "ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑŽÐ²Ð°Ð½Ð° ÐŸÐ¾Ð·Ð¸Ñ†Ñ–Ñ",
                "repeated_note": "ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑŽÐ²Ð°Ð½Ð° ÐÐ¾Ñ‚Ð°Ñ‚ÐºÐ°",
                "total_score": "Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° ÐžÑ†Ñ–Ð½ÐºÐ°",
                "is_propaganda": "Ð§Ð¸ Ñ” ÐŸÑ€Ð¾Ð¿Ð°Ð³Ð°Ð½Ð´Ð¾ÑŽ",
                "text_simplicity_deviation": "Ð’Ñ–Ð´Ñ…Ð¸Ð»ÐµÐ½Ð½Ñ ÐŸÑ€Ð¾ÑÑ‚Ð¾Ñ‚Ð¸ Ð¢ÐµÐºÑÑ‚Ñƒ",
                "graph_unavailable": "Neo4j Ð½Ðµ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾",
                "refresh_graph": "ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸",
                "sources_label": "Ð”Ð¶ÐµÑ€ÐµÐ»Ð°",
                "notes_label": "ÐÐ¾Ñ‚Ð°Ñ‚ÐºÐ¸",
                "relationships_label": "Ð—Ð²'ÑÐ·ÐºÐ¸",
                "most_influential": "ÐÐ°Ð¹Ð²Ð¿Ð»Ð¸Ð²Ð¾Ð²Ñ–ÑˆÑ– Ð”Ð¶ÐµÑ€ÐµÐ»Ð°",
                "avg_propaganda_score": "Ð¡ÐµÑ€ÐµÐ´Ð½Ñ ÐžÑ†Ñ–Ð½ÐºÐ° ÐŸÑ€Ð¾Ð¿Ð°Ð³Ð°Ð½Ð´Ð¸",
                "note_count": "ÐšÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ ÐÐ¾Ñ‚Ð°Ñ‚Ð¾Ðº",
                "platform": "ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°",
                "connections": "Ð—'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ",
                "tab_statistics": "Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",
                "refresh_statistics": "ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸ Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ",
                "select_chart": "ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ Ð“Ñ€Ð°Ñ„Ñ–Ðº:",
                "all_sources": "Ð’ÑÑ– Ð”Ð¶ÐµÑ€ÐµÐ»Ð°",
                "select_note": "ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ ÐÐ¾Ñ‚Ð°Ñ‚ÐºÑƒ:",
                "radar_chart": "Ð Ð°Ð´Ð°Ñ€Ð½Ð¸Ð¹ Ð“Ñ€Ð°Ñ„Ñ–Ðº",
                "histogram_chart": "Ð Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð» ÐžÑ†Ñ–Ð½Ð¾Ðº",
                "temporal_chart": "Ð§Ð°ÑÐ¾Ð²Ñ– Ð¢ÐµÐ½Ð´ÐµÐ½Ñ†Ñ–Ñ—",
                "correlation_chart": "ÐšÐ°Ñ€Ñ‚Ð° ÐšÐ¾Ñ€ÐµÐ»ÑÑ†Ñ–Ð¹",
                "breakdown_chart": "ÐÐ½Ð°Ð»Ñ–Ð· ÐÐ¾Ñ‚Ð°Ñ‚ÐºÐ¸",
                "platform_chart": "ÐŸÐ¾Ñ€Ñ–Ð²Ð½ÑÐ½Ð½Ñ ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼",
                "show_communities": "Ð¡Ð¿Ñ–Ð»ÑŒÐ½Ð¾Ñ‚Ð¸",
                "show_pagerank": "PageRank",
                "show_fehner_a": "Ð¤ÐµÑ…Ð½ÐµÑ€ A",
                "show_cascades": "ÐšÐ°ÑÐºÐ°Ð´Ð¸",
                "no_data_available": "Ð”Ð°Ð½Ñ– Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ–",
                "notes_analyzed": "ÐÐ¾Ñ‚Ð°Ñ‚Ð¾Ðº Ð¿Ñ€Ð¾Ð°Ð½Ð°Ð»Ñ–Ð·Ð¾Ð²Ð°Ð½Ð¾",
                "sources_detected": "Ð”Ð¶ÐµÑ€ÐµÐ» Ð²Ð¸ÑÐ²Ð»ÐµÐ½Ð¾",
                "communities_found": "Ð¡Ð¿Ñ–Ð»ÑŒÐ½Ð¾Ñ‚ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾",
                "dim_sentiment": "Ð¡ÐµÐ½Ñ‚Ð¸Ð¼ÐµÐ½Ñ‚",
                "dim_keywords": "ÐšÐ»ÑŽÑ‡Ð¾Ð²Ñ– Ð¡Ð»Ð¾Ð²Ð°",
                "dim_topics": "Ð¢ÐµÐ¼Ð¸",
                "dim_simplicity": "ÐŸÑ€Ð¾ÑÑ‚Ð¾Ñ‚Ð°",
                "dim_confidence": "Ð’Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–ÑÑ‚ÑŒ",
                "dim_clickbait": "ÐšÐ»Ñ–ÐºÐ±ÐµÐ¹Ñ‚",
                "dim_subjective": "Ð¡ÑƒÐ±'Ñ”ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ",
                "dim_cta": "Ð—Ð°ÐºÐ»Ð¸Ðº Ð´Ð¾ Ð”Ñ–Ñ—",
                "dim_repeated_take": "ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑŽÐ²Ð°Ð½Ð° ÐŸÐ¾Ð·Ð¸Ñ†Ñ–Ñ",
                "dim_repeated_note": "ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑŽÐ²Ð°Ð½Ð° ÐÐ¾Ñ‚Ð°Ñ‚ÐºÐ°",
                "dim_messianism": "ÐœÐµÑÑ–Ð°Ð½Ñ–Ð·Ð¼",
                "dim_generalization": "Ð£Ð·Ð°Ð³Ð°Ð»ÑŒÐ½ÐµÐ½Ð½Ñ",
                "dim_opposition": "ÐŸÑ€Ð¾Ñ‚Ð¸ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ",
                # ÐŸÐµÑ€ÐµÐºÐ»Ð°Ð´Ð¸ Ð´Ð»Ñ Ð°ÑƒÐ´Ñ–Ð¾
                "audio_input": "ÐÑƒÐ´Ñ–Ð¾ Ð’Ñ…Ñ–Ð´",
                "upload_audio_file": "ðŸ“ Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ ÐÑƒÐ´Ñ–Ð¾ Ð¤Ð°Ð¹Ð»",
                "select_audio_file": "Ð’Ð¸Ð±ÐµÑ€Ñ–Ñ‚ÑŒ ÐÑƒÐ´Ñ–Ð¾ Ð¤Ð°Ð¹Ð»",
                "invalid_audio": "ÐÐµÐ²Ñ–Ñ€Ð½Ð¸Ð¹ ÐÑƒÐ´Ñ–Ð¾ Ð¤Ð°Ð¹Ð»",
                "transcribing_audio": "Ð¢Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ñ–Ñ Ð°ÑƒÐ´Ñ–Ð¾...",
                "transcription_complete": "Ð¢Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ñ–Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° ({duration}, Ð¼Ð¾Ð²Ð°: {language})",
                "transcription_failed": "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¢Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ñ–Ñ—",
                "transcription_error": "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ñ–Ñ—",
                "audio_not_available": "ÐÑƒÐ´Ñ–Ð¾ ÐÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ðµ",
            }
        }

    def get_ui_text(self, key: str, language: str = "ukrainian") -> str:
        return self.ui_translations.get(language, self.ui_translations["ukrainian"]).get(key, key)

    def translate_to_english(self, text, source_language):
        try:
            translation = GoogleTranslator(source=source_language, target='english').translate(text)
            return translation
        except Exception as e:
            return f"Translation Error: {e}"
